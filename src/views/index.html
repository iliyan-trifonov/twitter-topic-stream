<html>
    <head>
        <meta charset="UTF-8">
        <title>Twitter Topic Stream</title>
        <link rel="stylesheet" href="/css/styles.css">
    </head>
    <body ng-app="TwitterTopicStream">

        <div ng-controller="IndexCtrl">

            <div>
                <input type="text" ng-value="search" ng-model="search">
                <button ng-click="updateSearch()">Update</button>
                <button ng-click="toggleStream()"
                        ng-bind="toggleStreamButtonTxt">Stop</button>
                <span ng-bind="messageTxt"
                      class="updated" ng-show="messageTxt"></span>
            </div>

            <div>&nbsp;</div>

            <div ng-repeat="tweet in tweets | orderBy: '-id' | limitTo: maxTweets"
                 ng-cloak
                 class="tweet ng-cloak"
            >
                <img ng-src="{{tweet.user.avatar}}" ng-show="tweet.user.avatar" />
                Created at: <span ng-bind="tweet.date"></span><br/>
                Text: <span ng-bind="tweet.text"></span><br/>
                Source: <span ng-bind-html="tweet.source"></span><br/>
                User: <span>{{tweet.user.name}}({{tweet.user.screen_name}})</span><br/>
                <a ng-href="{{tweet.url}}" target="_blank">Tweet URL</a>
            </div>
        </div>

        <script src="/vendor/angular/angular.min.js"></script>
        <script src="/vendor/angular-sanitize/angular-sanitize.min.js"></script>
        <script src="/vendor/angular-animate/angular-animate.min.js"></script>
        <script src="//cdn.socket.io/socket.io-1.3.4.js"></script>
        <script src="/vendor/angular-socket-io/socket.min.js"></script>
        <script type="text/javascript" src="/js/app.js"></script>
        <script type="text/javascript" src="/js/controllers.js"></script>
        <script type="text/javascript" src="/js/services.js"></script>
        <script type="text/javascript">
            (function (angular) {
                "use strict";

                angular.module("TwitterTopicStream.vars", [])
                    .constant("search", "<%= search %>" || "linux")
                    .constant("maxTweets", parseInt("<%= maxTweets %>", 10) || 20);
            })(angular);
        </script>
    </body>
</html>
